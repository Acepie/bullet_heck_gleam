(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function e(e,t,n){return e?t:n()}var t=class{withFields(e){let t=Object.keys(this).map(t=>t in e?e[t]:this[t]);return new this.constructor(...t)}},n=class{static fromArray(e,t){let n=t||new o;for(let t=e.length-1;t>=0;--t)n=new s(e[t],n);return n}[Symbol.iterator](){return new a(this)}toArray(){return[...this]}atLeastLength(e){let t=this;for(;e-- >0&&t;)t=t.tail;return t!==void 0}hasLength(e){let t=this;for(;e-- >0&&t;)t=t.tail;return e===-1&&t instanceof o}countLength(){let e=this,t=0;for(;e;)e=e.tail,t++;return t-1}};function r(e,t){return new s(e,t)}function i(e,t){return n.fromArray(e,t)}var a=class{#e;constructor(e){this.#e=e}next(){if(this.#e instanceof o)return{done:!0};{let{head:e,tail:t}=this.#e;return this.#e=t,{value:e,done:!1}}}},o=class extends n{},s=class extends n{constructor(e,t){super(),this.head=e,this.tail=t}},c=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(e,t,n){if(!(e instanceof Uint8Array))throw globalThis.Error(`BitArray can only be constructed from a Uint8Array`);if(this.bitSize=t??e.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(e.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error(`BitArray buffer length is invalid`);this.rawBuffer=e}byteAt(e){if(!(e<0||e>=this.byteSize))return l(this.rawBuffer,this.bitOffset,e)}equals(e){if(this.bitSize!==e.bitSize)return!1;let t=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&e.bitOffset===0){for(let n=0;n<t;n++)if(this.rawBuffer[n]!==e.rawBuffer[n])return!1;let n=this.bitSize%8;if(n){let r=8-n;if(this.rawBuffer[t]>>r!==e.rawBuffer[t]>>r)return!1}}else{for(let n=0;n<t;n++)if(l(this.rawBuffer,this.bitOffset,n)!==l(e.rawBuffer,e.bitOffset,n))return!1;let n=this.bitSize%8;if(n){let r=l(this.rawBuffer,this.bitOffset,t),i=l(e.rawBuffer,e.bitOffset,t),a=8-n;if(r>>a!==i>>a)return!1}}return!0}get buffer(){if(d(`buffer`,`Use BitArray.byteAt() or BitArray.rawBuffer instead`),this.bitOffset!==0||this.bitSize%8!=0)throw new globalThis.Error(`BitArray.buffer does not support unaligned bit arrays`);return this.rawBuffer}get length(){if(d(`length`,`Use BitArray.bitSize or BitArray.byteSize instead`),this.bitOffset!==0||this.bitSize%8!=0)throw new globalThis.Error(`BitArray.length does not support unaligned bit arrays`);return this.rawBuffer.length}};function l(e,t,n){return t===0?e[n]??0:e[n]<<t&255|e[n+1]>>8-t}var u={};function d(e,t){u[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),u[e]=!0)}var f=class e extends t{static isResult(t){return t instanceof e}},p=class extends f{constructor(e){super(),this[0]=e}isOk(){return!0}},m=class extends f{constructor(e){super(),this[0]=e}isOk(){return!1}};function h(e,t){let n=[e,t];for(;n.length;){let e=n.pop(),t=n.pop();if(e===t)continue;if(!se(e)||!se(t)||!ce(e,t)||te(e,t)||ne(e,t)||re(e,t)||ie(e,t)||ae(e,t)||oe(e,t))return!1;let r=Object.getPrototypeOf(e);if(r!==null&&typeof r.equals==`function`)try{if(e.equals(t))continue;return!1}catch{}let[i,a]=ee(e),o=i(e),s=i(t);if(o.length!==s.length)return!1;for(let r of o)n.push(a(e,r),a(t,r))}return!0}function ee(e){if(e instanceof Map)return[e=>e.keys(),(e,t)=>e.get(t)];{let t=e instanceof globalThis.Error?[`message`]:[];return[e=>[...t,...Object.keys(e)],(e,t)=>e[t]]}}function te(e,t){return e instanceof Date&&(e>t||e<t)}function ne(e,t){return!(e instanceof c)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((e,n)=>e===t[n]))}function re(e,t){return Array.isArray(e)&&e.length!==t.length}function ie(e,t){return e instanceof Map&&e.size!==t.size}function ae(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(e=>!t.has(e)))}function oe(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function se(e){return typeof e==`object`&&!!e}function ce(e,t){return typeof e!=`object`&&typeof t!=`object`&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(t=>e instanceof t)?!1:e.constructor===t.constructor}function g(e,t){return t===0?0:e/t}function _(e,t,n,r,i,a,o){let s=new globalThis.Error(a);for(let a in s.gleam_error=e,s.file=t,s.module=n,s.line=r,s.function=i,s.fn=i,o)s[a]=o[a];return s}var le=class extends t{},ue=class extends t{},de=class extends t{},v=class extends t{constructor(e){super(),this[0]=e}},fe=class extends t{};function pe(e){return!(e instanceof fe)}function me(e,t){return e instanceof v?e[0]:t}var he=new WeakMap,ge=new DataView(new ArrayBuffer(8)),_e=0;function ve(e){let t=he.get(e);if(t!==void 0)return t;let n=_e++;return _e===2147483647&&(_e=0),he.set(e,n),n}function ye(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function be(e){let t=0,n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function xe(e){ge.setFloat64(0,e);let t=ge.getInt32(0),n=ge.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function Se(e){return be(e.toString())}function Ce(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode==`function`)try{let t=e.hashCode(e);if(typeof t==`number`)return t}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return ve(e);if(e instanceof Date)return xe(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let t=0;t<e.length;t++)n=Math.imul(31,n)+y(e[t])|0;else if(e instanceof Set)e.forEach(e=>{n=n+y(e)|0});else if(e instanceof Map)e.forEach((e,t)=>{n=n+ye(y(e),y(t))|0});else{let t=Object.keys(e);for(let r=0;r<t.length;r++){let i=t[r],a=e[i];n=n+ye(y(a),be(i))|0}}return n}function y(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case`number`:return xe(e);case`string`:return be(e);case`bigint`:return Se(e);case`object`:return Ce(e);case`symbol`:return ve(e);case`function`:return ve(e);default:return 0}}var b=5,we=2**b,Te=we-1,Ee=we/2,De=we/4,x=0,S=1,C=2,Oe=3,ke={type:C,bitmap:0,array:[]};function Ae(e,t){return e>>>t&Te}function je(e,t){return 1<<Ae(e,t)}function Me(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Ne(e,t){return Me(e&t-1)}function w(e,t,n){let r=e.length,i=Array(r);for(let t=0;t<r;++t)i[t]=e[t];return i[t]=n,i}function Pe(e,t,n){let r=e.length,i=Array(r+1),a=0,o=0;for(;a<t;)i[o++]=e[a++];for(i[o++]=n;a<r;)i[o++]=e[a++];return i}function Fe(e,t){let n=e.length,r=Array(n-1),i=0,a=0;for(;i<t;)r[a++]=e[i++];for(++i;i<n;)r[a++]=e[i++];return r}function Ie(e,t,n,r,i,a){let o=y(t);if(o===r)return{type:Oe,hash:o,array:[{type:x,k:t,v:n},{type:x,k:i,v:a}]};let s={val:!1};return Le(ze(ke,e,o,t,n,s),e,r,i,a,s)}function Le(e,t,n,r,i,a){switch(e.type){case S:return Re(e,t,n,r,i,a);case C:return ze(e,t,n,r,i,a);case Oe:return Be(e,t,n,r,i,a)}}function Re(e,t,n,r,i,a){let o=Ae(n,t),s=e.array[o];if(s===void 0)return a.val=!0,{type:S,size:e.size+1,array:w(e.array,o,{type:x,k:r,v:i})};if(s.type===x)return h(r,s.k)?i===s.v?e:{type:S,size:e.size,array:w(e.array,o,{type:x,k:r,v:i})}:(a.val=!0,{type:S,size:e.size,array:w(e.array,o,Ie(t+b,s.k,s.v,n,r,i))});let c=Le(s,t+b,n,r,i,a);return c===s?e:{type:S,size:e.size,array:w(e.array,o,c)}}function ze(e,t,n,r,i,a){let o=je(n,t),s=Ne(e.bitmap,o);if((e.bitmap&o)!==0){let o=e.array[s];if(o.type!==x){let c=Le(o,t+b,n,r,i,a);return c===o?e:{type:C,bitmap:e.bitmap,array:w(e.array,s,c)}}let c=o.k;return h(r,c)?i===o.v?e:{type:C,bitmap:e.bitmap,array:w(e.array,s,{type:x,k:r,v:i})}:(a.val=!0,{type:C,bitmap:e.bitmap,array:w(e.array,s,Ie(t+b,c,o.v,n,r,i))})}else{let c=e.array.length;if(c>=Ee){let o=Array(32),s=Ae(n,t);o[s]=ze(ke,t+b,n,r,i,a);let l=0,u=e.bitmap;for(let t=0;t<32;t++)u&1&&(o[t]=e.array[l++]),u>>>=1;return{type:S,size:c+1,array:o}}else{let t=Pe(e.array,s,{type:x,k:r,v:i});return a.val=!0,{type:C,bitmap:e.bitmap|o,array:t}}}}function Be(e,t,n,r,i,a){if(n===e.hash){let t=Ve(e,r);if(t!==-1)return e.array[t].v===i?e:{type:Oe,hash:n,array:w(e.array,t,{type:x,k:r,v:i})};let o=e.array.length;return a.val=!0,{type:Oe,hash:n,array:w(e.array,o,{type:x,k:r,v:i})}}return Le({type:C,bitmap:je(e.hash,t),array:[e]},t,n,r,i,a)}function Ve(e,t){let n=e.array.length;for(let r=0;r<n;r++)if(h(t,e.array[r].k))return r;return-1}function He(e,t,n,r){switch(e.type){case S:return Ue(e,t,n,r);case C:return We(e,t,n,r);case Oe:return Ge(e,r)}}function Ue(e,t,n,r){let i=Ae(n,t),a=e.array[i];if(a!==void 0){if(a.type!==x)return He(a,t+b,n,r);if(h(r,a.k))return a}}function We(e,t,n,r){let i=je(n,t);if((e.bitmap&i)===0)return;let a=Ne(e.bitmap,i),o=e.array[a];if(o.type!==x)return He(o,t+b,n,r);if(h(r,o.k))return o}function Ge(e,t){let n=Ve(e,t);if(!(n<0))return e.array[n]}function Ke(e,t,n,r){switch(e.type){case S:return qe(e,t,n,r);case C:return Je(e,t,n,r);case Oe:return Ye(e,r)}}function qe(e,t,n,r){let i=Ae(n,t),a=e.array[i];if(a===void 0)return e;let o;if(a.type===x){if(!h(a.k,r))return e}else if(o=Ke(a,t+b,n,r),o===a)return e;if(o===void 0){if(e.size<=De){let t=e.array,n=Array(e.size-1),r=0,a=0,o=0;for(;r<i;){let e=t[r];e!==void 0&&(n[a]=e,o|=1<<r,++a),++r}for(++r;r<t.length;){let e=t[r];e!==void 0&&(n[a]=e,o|=1<<r,++a),++r}return{type:C,bitmap:o,array:n}}return{type:S,size:e.size-1,array:w(e.array,i,o)}}return{type:S,size:e.size,array:w(e.array,i,o)}}function Je(e,t,n,r){let i=je(n,t);if((e.bitmap&i)===0)return e;let a=Ne(e.bitmap,i),o=e.array[a];if(o.type!==x){let s=Ke(o,t+b,n,r);return s===o?e:s===void 0?e.bitmap===i?void 0:{type:C,bitmap:e.bitmap^i,array:Fe(e.array,a)}:{type:C,bitmap:e.bitmap,array:w(e.array,a,s)}}return h(r,o.k)?e.bitmap===i?void 0:{type:C,bitmap:e.bitmap^i,array:Fe(e.array,a)}:e}function Ye(e,t){let n=Ve(e,t);if(n<0)return e;if(e.array.length!==1)return{type:Oe,hash:e.hash,array:Fe(e.array,n)}}function Xe(e,t){if(e===void 0)return;let n=e.array,r=n.length;for(let e=0;e<r;e++){let r=n[e];if(r!==void 0){if(r.type===x){t(r.v,r.k);continue}Xe(r,t)}}}var Ze=class e{static fromObject(t){let n=Object.keys(t),r=e.new();for(let e=0;e<n.length;e++){let i=n[e];r=r.set(i,t[i])}return r}static fromMap(t){let n=e.new();return t.forEach((e,t)=>{n=n.set(t,e)}),n}static new(){return new e(void 0,0)}constructor(e,t){this.root=e,this.size=t}get(e,t){if(this.root===void 0)return t;let n=He(this.root,0,y(e),e);return n===void 0?t:n.v}set(t,n){let r={val:!1},i=Le(this.root===void 0?ke:this.root,0,y(t),t,n,r);return i===this.root?this:new e(i,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let n=Ke(this.root,0,y(t),t);return n===this.root?this:n===void 0?e.new():new e(n,this.size-1)}has(e){return this.root===void 0?!1:He(this.root,0,y(e),e)!==void 0}entries(){if(this.root===void 0)return[];let e=[];return this.forEach((t,n)=>e.push([n,t])),e}forEach(e){Xe(this.root,e)}hashCode(){let e=0;return this.forEach((t,n)=>{e=e+ye(y(t),y(n))|0}),e}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((e,n)=>{if(!h(t.get(n,!e),e))throw Qe}),!0}catch(e){if(e===Qe)return!1;throw e}}},Qe=Symbol();function $e(e,t){return!h(O(t,e),new m(void 0))}function et(e,t){return $e(t,e)}function T(e,t,n){return Ft(t,n,e)}function tt(e,t){for(;;){let n=e,r=t;if(n instanceof o)return r;{let i=n.tail,a=n.head[0],o=n.head[1];e=i,t=T(r,a,o)}}}function nt(e){return tt(e,Nt())}function rt(e,t,n){for(;;){let r=e,i=t,a=n;if(r instanceof o)return i;{let o=r.tail,s=r.head[0],c=r.head[1];e=o,t=a(i,s,c),n=a}}}function it(e,t,n){return rt(Pt(e),t,n)}function at(e,t){for(;;){let n=e,r=t;if(n instanceof o)return r;e=n.tail,t=r+1}}function ot(e){return at(e,0)}function st(e,t){for(;;){let n=e,i=t;if(n instanceof o)return i;{let a=n.head;e=n.tail,t=r(a,i)}}}function ct(e){return st(e,i([]))}function lt(e,t,n){for(;;){let i=e,a=t,s=n;if(i instanceof o)return ct(s);{let o=i.head,c=i.tail,l;l=a(o)?r(o,s):s;let u=l;e=c,t=a,n=u}}}function ut(e,t){return lt(e,t,i([]))}function dt(e,t,n){for(;;){let i=e,a=t,s=n;if(i instanceof o)return ct(s);{let o=i.head,c=i.tail,l,u=a(o);if(u instanceof p){let e=u[0];l=r(e,s)}else l=s;let d=l;e=c,t=a,n=d}}}function ft(e,t){return dt(e,t,i([]))}function pt(e,t,n){for(;;){let i=e,a=t,s=n;if(i instanceof o)return ct(s);{let o=i.head;e=i.tail,t=a,n=r(a(o),s)}}}function mt(e,t){return pt(e,t,i([]))}function ht(e,t,n){for(;;){let i=e,a=t,s=n;if(a<=0||i instanceof o)return ct(s);{let o=i.head;e=i.tail,t=a-1,n=r(o,s)}}}function gt(e,t){return ht(e,t,i([]))}function _t(e,t){for(;;){let n=e,i=t;if(n instanceof o)return i;{let a=n.head;e=n.tail,t=r(a,i)}}}function vt(e,t){return _t(ct(e),t)}function E(e,t,n){for(;;){let r=e,i=t,a=n;if(r instanceof o)return i;{let o=r.head;e=r.tail,t=a(i,o),n=a}}}function yt(e,t){for(;;){let n=e,r=t;if(n instanceof o)return!1;{let i=n.head,a=n.tail,o=r(i);if(o)return o;e=a,t=r}}}function bt(e,t,n){for(;;){let i=e,a=t,o=n,s=Wt(i,a);if(s instanceof le)e=i,t=a-1,n=r(a,o);else if(s instanceof ue)return r(a,o);else e=i,t=a+1,n=r(a,o)}}function xt(e,t){return bt(e,t,i([]))}function St(e,t){for(;;){let n=e,r=t;if(n instanceof o)return;{let i=n.head,a=n.tail;r(i),e=a,t=r}}}var Ct=void 0,wt={};function D(e){return e}function Tt(e){return e.toString()}var Et=[` `,`	`,`
`,`\v`,`\f`,`\r`,`Â…`,`\u2028`,`\u2029`].join(``);`${Et}`,`${Et}`;function Dt(e){return Math.ceil(e)}function Ot(e){return Math.floor(e)}function kt(e){return Math.round(e)}function At(e){return Math.trunc(e)}function jt(e,t){return e**+t}function Mt(){let e=Math.random();return e===1?Mt():e}function Nt(){return Ze.new()}function Pt(e){return n.fromArray(e.entries())}function O(e,t){let n=e.get(t,wt);return n===wt?new m(Ct):new p(n)}function Ft(e,t,n){return n.set(e,t)}function It(e,t){return e===t?new ue:e<t?new le:new de}function Lt(e,t){return e<t?e:t}function Rt(e,t){return e>t?e:t}function zt(e){return e>=0?e:0-e}function Bt(e,t){let n=Dt(t)-t>0;return e<0&&n||e===0&&t<0?new m(void 0):new p(jt(e,t))}function Vt(e){return Bt(e,.5)}function Ht(e){return-1*e}function Ut(e){return e>=0?kt(e):0-kt(Ht(e))}function Wt(e,t){return e===t?new ue:e<t?new le:new de}function Gt(e){return Ut(Ot(Mt()*D(e)))}var Kt=class extends t{constructor(e,t){super(),this.fonts=e,this.images=t}},qt=class extends t{constructor(e,t,n,r,i,a,o){super(),this.init=e,this.draw=t,this.on_tick=n,this.on_key_pressed=r,this.on_key_released=i,this.on_mouse_moved=a,this.on_mouse_clicked=o}},Jt=class extends t{constructor(e,t,n,r,i,a,o,s){super(),this.preload=e,this.init=t,this.draw=n,this.on_tick=r,this.on_key_pressed=i,this.on_key_released=a,this.on_mouse_moved=o,this.on_mouse_clicked=s}};function Yt(){return new Kt(Nt(),Nt())}function Xt(e,t,n){return new Kt(T(e.fonts,t,n),e.images)}function Zt(e,t){return O(e.fonts,t)}function Qt(e,t,n){return new Jt(e,t,n,new fe,new fe,new fe,new fe,new fe)}function $t(e,t){if(e instanceof qt){let n=e.init,r=e.draw,i=e.on_key_pressed,a=e.on_key_released,o=e.on_mouse_moved,s=e.on_mouse_clicked;return new qt(n,r,new v(t),i,a,o,s)}else{let n=e.preload,r=e.init,i=e.draw,a=e.on_key_pressed,o=e.on_key_released,s=e.on_mouse_moved,c=e.on_mouse_clicked;return new Jt(n,r,i,new v(t),a,o,s,c)}}function en(e,t){if(e instanceof qt){let n=e.init,r=e.draw,i=e.on_tick,a=e.on_key_released,o=e.on_mouse_moved,s=e.on_mouse_clicked;return new qt(n,r,i,new v(t),a,o,s)}else{let n=e.preload,r=e.init,i=e.draw,a=e.on_tick,o=e.on_key_released,s=e.on_mouse_moved,c=e.on_mouse_clicked;return new Jt(n,r,i,a,new v(t),o,s,c)}}function tn(e,t){if(e instanceof qt){let n=e.init,r=e.draw,i=e.on_tick,a=e.on_key_pressed,o=e.on_mouse_moved,s=e.on_mouse_clicked;return new qt(n,r,i,a,new v(t),o,s)}else{let n=e.preload,r=e.init,i=e.draw,a=e.on_tick,o=e.on_key_pressed,s=e.on_mouse_moved,c=e.on_mouse_clicked;return new Jt(n,r,i,a,o,new v(t),s,c)}}function nn(e,t){if(e instanceof qt){let n=e.init,r=e.draw,i=e.on_tick,a=e.on_key_pressed,o=e.on_key_released,s=e.on_mouse_moved;return new qt(n,r,i,a,o,s,new v(t))}else{let n=e.preload,r=e.init,i=e.draw,a=e.on_tick,o=e.on_key_pressed,s=e.on_key_released,c=e.on_mouse_moved;return new Jt(n,r,i,a,o,s,c,new v(t))}}const rn=e=>{let t,n;new p5(function(r){e.preload&&(r.preload=function(){n=e.preload(r)}),r.setup=function(){t=e.init(r)},r.draw=function(){e.draw(r,t,n),pe(e.on_tick)&&(t=me(e.on_tick)(t))},pe(e.on_key_pressed)&&(r.keyPressed=function(){t=me(e.on_key_pressed)(r.key,r.keyCode,t)}),pe(e.on_key_released)&&(r.keyReleased=function(){t=me(e.on_key_released)(r.key,r.keyCode,t)}),pe(e.on_mouse_clicked)&&(r.mouseClicked=function(){t=me(e.on_mouse_clicked)(r.pmouseX,r.pmouseY,t)}),pe(e.on_mouse_moved)&&(r.mouseMoved=function(){t=me(e.on_mouse_moved)(r.pmouseX,r.pmouseY,t)})})};function an(e,...t){return e.createCanvas(...t),e}function k(e,...t){return e.text(...t),e}function on(e,...t){return e.textFont(...t),e}function sn(e,...t){return e.textSize(...t),e}function cn(e,...t){return e.textWidth(...t)}function ln(e,...t){return e.background(...t),e}function un(e,...t){return e.ellipse(...t),e}function dn(e,...t){return e.circle(...t),e}function fn(e,...t){return e.rect(...t),e}function A(e,...t){return e.line(...t),e}function j(e,...t){return e.fill(...t),e}function pn(e,...t){return e.stroke(...t),e}function mn(e,...t){return e.noStroke(...t),e}function hn(e,...t){return e.strokeWeight(...t),e}function gn(e,...t){return e.loadFont(...t)}var _n=class extends t{constructor(e,t){super(),this.entity=e,this.additional_inputs=t}},M=class extends t{constructor(e,t,n){super(),this.success=e,this.entity=t,this.additional_outputs=n}};function vn(e){return t=>{let n=e(t),r,i,a;return r=n.success,i=n.entity,a=n.additional_outputs,new M(!r,i,a)}}function yn(e,t,n,r){if(e instanceof o)return e=>new M(!1,e.entity,t);{let i=e.head,a=e.tail;return e=>{let o=i(e),s,c,l;if(s=o.success,c=o.entity,l=o.additional_outputs,s)return new M(!0,c,l);{let i=new _n(c,n(e.additional_inputs,l)),o=yn(a,t,n,r)(i),s,u,d;s=o.success,u=o.entity,d=o.additional_outputs;let f=r(l,d);return new M(s,u,f)}}}}function bn(e,t,n,r){if(e instanceof o)return e=>new M(!0,e.entity,t);{let i=e.head,a=e.tail;return e=>{let o=i(e),s,c,l;if(s=o.success,c=o.entity,l=o.additional_outputs,s){let i=new _n(c,n(e.additional_inputs,l)),o=bn(a,t,n,r)(i),s,u,d;s=o.success,u=o.entity,d=o.additional_outputs;let f=r(l,d);return new M(s,u,f)}else return new M(!1,c,r(t,l))}}}function xn(e,t,n,r){if(e instanceof o)return e=>new M(!0,e.entity,t);{let i=e.head,a=e.tail;return e=>{let o=i(e),s,c;s=o.entity,c=o.additional_outputs;let l=new _n(s,n(e.additional_inputs,c)),u=xn(a,t,n,r)(l),d,f,p;d=u.success,f=u.entity,p=u.additional_outputs;let m=r(c,p);return new M(d,f,m)}}}function N(){return Date.now().valueOf()}function Sn(e,t){if(e instanceof p){let n=e[0];return new p(t(n))}else return e}function Cn(e,t){if(e instanceof p){let n=e[0];return t(n)}else return e}var wn=class extends t{},Tn=class extends t{constructor(e,t){super(),this[0]=e,this[1]=t}},En=class extends t{constructor(e){super(),this.continuation=e}},Dn=class extends t{constructor(e,t){super(),this.element=e,this.accumulator=t}},On=class extends t{};function kn(){return new wn}function An(e,t){return()=>{let n=t(e);if(n instanceof Dn){let e=n.element,r=n.accumulator;return new Tn(e,An(r,t))}else return new wn}}function jn(e,t){return new En(An(e,t))}function Mn(e,t,n){for(;;){let r=e,i=t,a=n,o=r();if(o instanceof wn)return a;{let r=o[0];e=o[1],t=i,n=i(a,r)}}}function Nn(e,t,n){let r=e.continuation;return Mn(r,n,t)}function Pn(e){return Nn(e,void 0,(e,t)=>{})}function Fn(e,t){return()=>{let n=e();if(n instanceof wn)return n;{let e=n[0],r=n[1];return new Tn(t(e),Fn(r,t))}}}function In(e,t){let n=e.continuation;return new En(Fn(n,t))}function Ln(e){return new En(()=>new Tn(e(),kn))}function Rn(e,t){let n=Wt(e,t);return n instanceof le?jn(e,e=>e>t?new On:new Dn(e,e+1)):n instanceof ue?Ln(()=>e):jn(e,e=>e<t?new On:new Dn(e,e-1))}function zn(e){let t=e.continuation();if(t instanceof wn)return new m(void 0);{let e=t[0];return new p(e)}}function Bn(e,t){return Pn(In(e,t))}function Vn(e){return Math.sin(e)}function Hn(){return Math.PI}function Un(e,t){return Math.atan2(e,t)}function Wn(e){return Math.cos(e)}function Gn(e,t){return Un(e,t)}function Kn(e){return Wn(e)}function qn(e){return Vn(e)}function Jn(){return Hn()}var Yn=`src/vector.gleam`,P=class extends t{constructor(e,t,n){super(),this.x=e,this.y=t,this.z=n}};function F(e,t){return new P(e.x+t.x,e.y+t.y,e.z+t.z)}function I(e,t){return new P(e.x-t.x,e.y-t.y,e.z-t.z)}function Xn(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}function L(e,t){return new P(e.x*t,e.y*t,e.z*t)}function Zn(e,t){return new P(g(e.x,t),g(e.y,t),g(e.z,t))}function Qn(e){return e.x*e.x+e.y*e.y+e.z*e.z}function $n(e){let t=Vt(Qn(e)),n;if(t instanceof p)n=t[0];else throw _(`let_assert`,Yn,`vector`,51,`magnitude`,`Pattern match failed, no pattern matched the value.`,{value:t,start:1435,end:1495,pattern_start:1446,pattern_end:1453});return n}function er(e){return Zn(e,$n(e))}function tr(e,t){let n=t*t;return Qn(e)<=n?e:L(er(e),t)}function R(e,t){return $n(I(e,t))}function nr(e){return new P(e.x,e.y,0)}function rr(e){let t=Gn(e.y,e.x),n=t;return n<0?n+2*Jn():t}function ir(e,t){let n=rr(e)+t,r=$n(nr(e));return new P(Kn(n)*r,qn(n)*r,e.z)}function ar(e){return ir(new P(1,0,0),e)}var or=class extends t{constructor(e,t,n,r){super(),this.position=e,this.velocity=t,this.belongs_to_player=n,this.time_spawned=r}},sr=400,cr=6,lr=5,ur=`#3030ff`,dr=`#f4424b`;function fr(e){return new or(F(e.position,e.velocity),e.velocity,e.belongs_to_player,e.time_spawned)}function pr(e){return e.time_spawned+sr>N()}function mr(e,t,n){return R(e.position,t)<n/2+cr/2}function hr(e,t,n){return new or(e,L(er(t),lr),n,N())}function gr(e,t){return mn(e),t.belongs_to_player?j(e,ur):j(e,dr),dn(e,t.position.x,t.position.y,cr)}var _r=`src/priorityq.gleam`,vr=class extends t{constructor(e,t){super(),this.data=e,this.cmp=t}},yr=class extends t{},br=class extends t{constructor(e){super(),this[0]=e}},xr=class extends t{constructor(e,t,n){super(),this.val=e,this.children=t,this.size=n}};function Sr(e){return new vr(new yr,e)}function Cr(e,t){return new vr(new br(e),t)}function wr(e,t){return new vr(new br(new xr(e,i([]),1)),t)}function Tr(e){return e.data instanceof yr}function Er(e){let t=e.data;if(t instanceof yr)return new fe;{let e=t[0];return new v(e.val)}}function Dr(e,t){if(h(e.cmp,t.cmp)){let n=e.data,i=t.data;if(n instanceof yr)return t;if(i instanceof yr)return e;{let t=n[0],a=i[0],o=t.size+a.size;return e.cmp(t.val,a.val)instanceof de?new vr(new br(new xr(t.val,r(a,t.children),o)),e.cmp):new vr(new br(new xr(a.val,r(t,a.children),o)),e.cmp)}}else throw _(`panic`,_r,`priorityq`,118,`merge`,`inconsistent cmp function`,{})}function Or(e,t){return Dr(wr(t,e.cmp),e)}function kr(e,t){if(e instanceof o)return new vr(new yr,t);{let n=e.tail;if(n instanceof o){let n=e.head;return Cr(n,t)}else{let r=e.head,i=n.head,a=n.tail;return Dr(Dr(Cr(r,t),Cr(i,t)),kr(a,t))}}}function Ar(e){let t=e.data;if(t instanceof yr)return e;{let n=t[0];return kr(n.children,e.cmp)}}function jr(e){let[t,n]=Mr([0,1013904223]);return Mr([t+e>>>0,n])}function Mr(e){let[t,n]=e;return[t*1664525+n>>>0,n]}function Nr(e){let[t,n]=e,r=(t^t>>>(t>>>28)+4)*277803737;return(r>>>22^r)>>>0}function Pr(e,t,n){let r=n-t+1;if(r-1&r){let n=(-r>>>0)%r>>>0,i=e,a;do a=Nr(i),i=Mr(i);while(a<n);return[t+a%r,i]}else return[((r-1&Nr(e))>>>0)+t,Mr(e)]}function Fr(e,t,n){let r=Mr(e),i=Nr(e),a=Nr(r),o=67108863&i,s=134217727&a;return[(o*134217728+s)/9007199254740992*(n-t)+t,Mr(r)]}function Ir(){return jr(Gt(4294967296))}var Lr=`src/prng/random.gleam`,Rr=class extends t{constructor(e){super(),this.step=e}};function zr(e,t){return e.step(t)}function Br(e,t){return jn(t,t=>{let n=zr(e,t),r,i;return r=n[0],i=n[1],new Dn(r,i)})}function Vr(e){return Br(e,Ir())}function z(e){let t=zn(Vr(e)),n;if(t instanceof p)n=t[0];else throw _(`let_assert`,Lr,`prng/random`,196,`random_sample`,`Pattern match failed, no pattern matched the value.`,{value:t,start:6431,end:6498,pattern_start:6442,pattern_end:6452});return n}function Hr(e,t,n){let r=n(e,t);return r instanceof le||r instanceof ue?[e,t]:[t,e]}function Ur(e,t){return new Rr(n=>{let r=Hr(e,t,Wt),i,a;return i=r[0],a=r[1],Pr(n,i,a)})}function Wr(e,t){return new Rr(n=>{let r=Hr(e,t,It),i,a;return i=r[0],a=r[1],Fr(n,i,a)})}var Gr=class extends t{constructor(e){super(),this.position=e}};function Kr(e,t,n){return R(e.position,t)<6/2+n/2}function qr(e,t){let n=t.position;return A(A(A(A(dn(j(pn(e,`#f4424b`),`#f4424b`),n.x,n.y,6),n.x-4,n.y-4,n.x+4,n.y+4),n.x-4,n.y+4,n.x+4,n.y-4),n.x,n.y-5,n.x,n.y+5),n.x-5,n.y,n.x+5,n.y)}var Jr=class extends t{constructor(e,t){super(),this.position=e,this.size=t}};function Yr(e,t){return dn(j(dn(j(dn(j(mn(e),`#969696`),t.position.x-2,t.position.y-2,t.size+1),`#3C3C3C`),t.position.x-1,t.position.y-1,t.size+1),`#000000`),t.position.x,t.position.y,t.size*2)}var B=class extends t{},V=class extends t{},H=class extends t{},U=class extends t{},W=class extends t{},G=class extends t{},K=class extends t{},Xr=class extends t{},q=class extends t{constructor(e,t,n,r,i,a,o,s){super(),this.left=e,this.right=t,this.top=n,this.bottom=r,this.top_left=i,this.top_right=a,this.bottom_left=o,this.bottom_right=s}},Zr=`#cbe3ed`,Qr=`#42aad6`,$r=`#3c3c3c`,ei=`#646464`;function ti(e){return e instanceof B?new V:e instanceof V?new B:e instanceof H?new U:e instanceof U?new H:e instanceof W?new Xr:e instanceof G?new K:e instanceof K?new G:new W}function ni(){return new q(!1,!1,!1,!1,!1,!1,!1,!1)}function ri(e,t,n){return t instanceof B?new q(n,e.right,e.top,e.bottom,e.top_left,e.top_right,e.bottom_left,e.bottom_right):t instanceof V?new q(e.left,n,e.top,e.bottom,e.top_left,e.top_right,e.bottom_left,e.bottom_right):t instanceof H?new q(e.left,e.right,n,e.bottom,e.top_left,e.top_right,e.bottom_left,e.bottom_right):t instanceof U?new q(e.left,e.right,e.top,n,e.top_left,e.top_right,e.bottom_left,e.bottom_right):t instanceof W?new q(e.left,e.right,e.top,e.bottom,n,e.top_right,e.bottom_left,e.bottom_right):t instanceof G?new q(e.left,e.right,e.top,e.bottom,e.top_left,n,e.bottom_left,e.bottom_right):t instanceof K?new q(e.left,e.right,e.top,e.bottom,e.top_left,e.top_right,n,e.bottom_right):new q(e.left,e.right,e.top,e.bottom,e.top_left,e.top_right,e.bottom_left,n)}function ii(e,t){return t instanceof B?e.left:t instanceof V?e.right:t instanceof H?e.top:t instanceof U?e.bottom:t instanceof W?e.top_left:t instanceof G?e.top_right:t instanceof K?e.bottom_left:e.bottom_right}function ai(e,t,n,r,i){let a=D(r*i),o=D((r+1)*i),s=D(n*i),c=D((n+1)*i);return hn(e,1),j(e,Zr),pn(e,Zr),fn(e,s,a,D(i),D(i)),hn(e,4),pn(e,$r),A(e,c+2,a,c+2,o),A(e,s+3,o+2,c+2,o+2),hn(e,3),pn(e,ei),A(e,c+1,a,c+1,o),A(e,s+2,o+1,c+1,o+1),pn(e,Qr),hn(e,2),t.left||A(e,s,a,s,o),t.right||A(e,c,a,c,o),t.top||A(e,s,a,c,a),t.bottom?e:A(e,s,o,c,o)}var oi=`src/dungeon.gleam`,si=class extends t{constructor(e,t,n){super(),this.rooms=e,this.pits=t,this.obstacles=n}},J=7,ci=J,li=.8,ui=.3,di=5,fi=20,pi=80,mi=.5,hi=3;function gi(e,t,n){return n instanceof B?[e-1,t]:n instanceof V?[e+1,t]:n instanceof H?[e,t-1]:n instanceof U?[e,t+1]:n instanceof W?[e-1,t-1]:n instanceof G?[e+1,t-1]:n instanceof K?[e-1,t+1]:[e+1,t+1]}function _i(e,t){let n=e[0],r=e[1],i=t[0],a=t[1];if(n===i&&r<a)return new p(new U);{let n=e[0],r=e[1],i=t[0],a=t[1];if(n<i&&r<a)return new p(new Xr);{let n=e[0],r=e[1],i=t[0],a=t[1];if(n===i&&r>a)return new p(new H);{let n=e[0],r=e[1],i=t[0],a=t[1];if(n>i&&r>a)return new p(new W);{let n=e[0],r=e[1],i=t[0],a=t[1];if(n<i&&r===a)return new p(new V);{let n=e[0],r=e[1],i=t[0],a=t[1];if(n<i&&r>a)return new p(new G);{let n=e[0],r=e[1],i=t[0],a=t[1];if(n>i&&r===a)return new p(new B);{let n=e[0],r=e[1],i=t[0],a=t[1];return n>i&&r<a?new p(new K):new m(void 0)}}}}}}}}function vi(e,t){return yt(e.pits,e=>R(e.position,t)<e.size)}function yi(){return globalThis.Math.trunc(J/2)}function bi(e,t){return e<0||e>=J||t<0||t>=J}function xi(t){return it(t,t,(t,n,r)=>{let i,a;i=n[0],a=n[1];let o=(n,r,o,s)=>e(!(ii(n,r)&&ii(n,o)),n,()=>{let c=gi(i,a,s),l,u;return l=c[0],u=c[1],e(bi(l,u),n,()=>{let e=O(t,[l,u]);if(e instanceof p){let t=e[0];return ii(t,ti(r))&&ii(t,ti(o))?ri(n,s,!0):n}else return n})}),s;return s=o(o(o(o(r,new V,new U,new Xr),new B,new U,new K),new V,new H,new G),new B,new H,new W),T(t,[i,a],s)})}function Si(t,n,r,i,a){let o=ni(),s;s=i===0?o:ri(o,a,!0);let c=T(t,[n,r],s);return e(i>ci,c,()=>{let t=(t,o)=>e(h(o,a)&&i!==0,t,()=>{let a=gi(n,r,o),s,c;return s=a[0],c=a[1],e(bi(s,c),t,()=>e(et(t,[s,c]),t,()=>{let a;return a=z(Wr(0,1)),e(a>li,t,()=>{let e=O(t,[n,r]),a;if(e instanceof p)a=e[0];else throw _(`let_assert`,oi,`dungeon`,122,`generate_rooms`,`Pattern match failed, no pattern matched the value.`,{value:e,start:3091,end:3141,pattern_start:3102,pattern_end:3107});let l=ri(a,o,!0);return Si(T(t,[n,r],l),s,c,i+1,ti(o))})}))});return t(t(t(t(c,new B),new V),new H),new U)})}function Ci(t){return it(t,t,(t,n,r)=>{let i,a;i=n[0],a=n[1];let o=(t,n)=>{let r=gi(i,a,n),o,s;return o=r[0],s=r[1],e(bi(o,s),t,()=>{let r=O(t,[o,s]);if(r instanceof p){let c=r[0],l;return l=z(Wr(0,1)),e(l>ui,t,()=>{let e=O(t,[i,a]),r;if(e instanceof p)r=e[0];else throw _(`let_assert`,oi,`dungeon`,194,`break_walls`,`Pattern match failed, no pattern matched the value.`,{value:e,start:5388,end:5441,pattern_start:5399,pattern_end:5407});let l=ri(r,n,!0),u=T(t,[i,a],l),d=ri(c,ti(n),!0);return T(u,[o,s],d)})}else return t})};return o(o(t,new V),new U)})}function wi(){return D(J*100)}function Ti(e){let t=wi();return e.x<0||e.x>=t||e.y<0||e.y>=t}function Ei(e){return new P(D(e[0]*100)+D(100)/2,D(e[1]*100)+D(100)/2,0)}function Di(e){for(;;){let t=e,n;n=z(Ur(0,J));let r=n,i;i=z(Ur(0,J));let a=[r,i];if(O(t,a)instanceof p)return Ei(a);e=t}}function Oi(e,t){return Bn(Rn(0,J),n=>Bn(Rn(0,J),r=>Sn(O(t.rooms,[n,r]),t=>ai(e,t,n,r,100)))),St(t.pits,t=>Yr(e,t)),St(t.obstacles,t=>qr(e,t))}function ki(e){return[At(g(e.x,D(100))),At(g(e.y,D(100)))]}function Ai(t,n,r){return e(Ti(r),!1,()=>{let e=ki(n),i=ki(r),a=O(t.rooms,e),o=O(t.rooms,i);if(a instanceof p&&o instanceof p){let t=a[0],n=_i(e,i);if(n instanceof p){let e=n[0];return ii(t,e)}else return!0}else return!1})}function ji(t,n,r){return e(Ti(r),new m(void 0),()=>{let i=ki(n),a=ki(r),o=O(t.rooms,i),s=O(t.rooms,a);if(o instanceof p&&s instanceof p){let t=o[0];return Cn(_i(i,a),n=>e(ii(t,n),new m(void 0),()=>new p(ti(n))))}else return new m(void 0)})}function Mi(e,t){let n=O(e,t),a;if(n instanceof p)a=n[0][2];else throw _(`let_assert`,oi,`dungeon`,589,`path_from_costs`,`Pattern match failed, no pattern matched the value.`,{value:n,start:17813,end:17870,pattern_start:17824,pattern_end:17841});if(a instanceof v){let n=a[0];return r(Ei(t),Mi(e,n))}else return i([])}function Ni(t,n,r,a){return e(Tr(r),i([]),()=>{let e=Er(r),o,s;if(e instanceof v)o=e[0][0],s=e[0][1];else throw _(`let_assert`,oi,`dungeon`,532,`path_to_helper`,`Pattern match failed, no pattern matched the value.`,{value:e,start:16007,end:16071,pattern_start:16018,pattern_end:16044});let c=Ar(r);if(h(o,n))return ct(Mi(a,n));{let e;e=E(i([new B,new V,new H,new U,new W,new G,new K,new Xr]),[c,a],(e,r)=>{let i,a;i=e[0],a=e[1];let c=O(t.rooms,o),l;if(c instanceof p)l=c[0];else throw _(`let_assert`,oi,`dungeon`,551,`path_to_helper`,`Pattern match failed, no pattern matched the value.`,{value:c,start:16569,end:16620,pattern_start:16580,pattern_end:16591});if(ii(l,r)){let e=gi(o[0],o[1],r),t=s+R(new P(D(e[0]),D(e[1]),0),new P(D(n[0]),D(n[1]),0)),c=O(a,e);return c instanceof p&&c[0][1]<t?[i,a]:[(()=>Or(i,[e,t,new v(o)]))(),(()=>T(a,e,[e,t,new v(o)]))()]}else return[i,a]});let r=e,l,u;return l=r[0],u=r[1],Ni(t,n,l,u)}})}function Pi(e,t,n){let r=ki(t),a=[r,0,new fe];return Ni(e,ki(n),(()=>Or(Sr((e,t)=>It(t[1],e[1])),a))(),nt(i([[r,a]])))}function Fi(e,t){return yt(e,e=>R(e.position,t)<pi)}function Ii(t,n,r){return e(r>3,new m(void 0),()=>{let e=(D(100)-6)/2,i;i=z(Wr(e*-1,e));let a=i,o;o=z(Wr(e*-1,e));let s=F(t,new P(a,o,0));return Fi(n,s)?Ii(t,n,r+1):new p(new Gr(s))})}function Li(e){let t=yi();return R(Ei([t,t]),e)<pi}function Ri(e,t){for(;;){let n=e,r=t,i=Di(n),a;a=z(Wr(-30,30));let o=a,s;s=z(Wr(-30,30));let c=F(i,new P(o,s,0));if(Fi(r,c)||Li(c))e=n,t=r;else return c}}function zi(e){return E(xt(1,di),i([]),(t,n)=>r(new Jr(Ri(e,t),fi),t))}function Bi(t,n){return it(t,i([]),(t,i,a)=>{let o;return o=z(Wr(0,1)),e(o>mi,t,()=>{let e=Ei(i),a;return a=z(Ur(0,hi)),E(xt(1,a),t,(t,i)=>{let a=Ii(e,n,0);if(a instanceof p){let e=a[0];return r(e,t)}else return t})})})}function Vi(){let e=yi(),t;t=xi(Ci(Si(Nt(),e,e,0,new B)));let n=t,r=zi(n);return new si(n,r,Bi(n,r))}var Hi=`src/player.gleam`,Y=class extends t{constructor(e,t,n,r,i,a,o){super(),this.position=e,this.velocity=t,this.acceleration=n,this.last_fire_time=r,this.last_hit_time=i,this.current_health=a,this.max_health=o}},Ui=4,Wi=.2,Gi=120,Ki=500,qi=100,Ji=.02,Yi=`#000000`,Xi=`#4c4cff`,Zi=`#0000ff`,Qi=`#000000`;function $i(){return 2/3}function ea(e){return new Y(F(e.position,e.velocity),e.velocity,e.acceleration,e.last_fire_time,e.last_hit_time,e.current_health,e.max_health)}function ta(e,t){let n;n=t?$i():-1*$i();let r=n;return new Y(e.position,e.velocity,new P(r,e.acceleration.y,e.acceleration.z),e.last_fire_time,e.last_hit_time,e.current_health,e.max_health)}function na(e,t){let n;n=t?$i():-1*$i();let r=n;return new Y(e.position,e.velocity,new P(e.acceleration.x,r,e.acceleration.z),e.last_fire_time,e.last_hit_time,e.current_health,e.max_health)}function ra(e){return new Y(e.position,new P(0,e.velocity.y,e.velocity.z),new P(0,e.acceleration.y,e.acceleration.z),e.last_fire_time,e.last_hit_time,e.current_health,e.max_health)}function ia(e){return new Y(e.position,new P(e.velocity.x,0,e.velocity.z),new P(e.acceleration.x,0,e.acceleration.z),e.last_fire_time,e.last_hit_time,e.current_health,e.max_health)}function aa(e,t){return new Y(e.position,e.velocity,e.acceleration,e.last_fire_time,N(),e.current_health-t,e.max_health)}function oa(e){return e.current_health<=0}function sa(e){let t=F(e.velocity,e.acceleration),n;n=tr(nr(t),Ui);let r=n;return new Y(e.position,new P(r.x,r.y,t.z),e.acceleration,e.last_fire_time,e.last_hit_time,e.current_health,e.max_health)}function ca(e){let t=e.position.z,n=e.velocity.z;return t===0&&n<=0?new Y(e.position,new P(e.velocity.x,e.velocity.y,Wi),e.acceleration,e.last_fire_time,e.last_hit_time,e.current_health,e.max_health):e}function la(e){return e.last_fire_time+Gi<=N()}function ua(e){return e.last_hit_time+Ki>=N()}function da(e){return new Y(e,new P(0,0,0),new P(0,0,0),0,0,qi,qi)}function fa(e){let t;return t=e.position.z<0?new P(e.position.x,e.position.y,0):e.position,new Y(t,new P(e.velocity.x,e.velocity.y,e.velocity.z-Ji),e.acceleration,e.last_fire_time,e.last_hit_time,e.current_health,e.max_health)}function pa(e,t){let n=oa(t),r=ua(t);n?j(e,Yi):r?j(e,Xi):j(e,Zi),pn(e,Qi);let i=Bt(10,1+t.position.z/4),a;if(i instanceof p)a=i[0];else throw _(`let_assert`,Hi,`player`,209,`draw`,`Pattern match failed, no pattern matched the value.`,{value:i,start:5171,end:5262,pattern_start:5182,pattern_end:5198});let o=Rt(a,10/2);return un(e,t.position.x,t.position.y,o,o)}var ma=`src/enemy.gleam`,ha=class extends t{constructor(e,t,n){super(),this.enemies=e,this.dungeon=t,this.player=n}},X=class extends t{constructor(e){super(),this.bullets=e}},Z=class extends t{constructor(e,t,n,r,i,a,o,s,c,l,u){super(),this.position=e,this.rotation=t,this.velocity=n,this.rotational_velocity=r,this.current_health=i,this.max_health=a,this.path=o,this.last_path_updated=s,this.spotted_player=c,this.last_bullet_fired=l,this.btree=u}},ga=80,_a=200,va=.02,ya=20,ba=10,xa=40,Sa=3,Ca=3,Q=Ca,wa=.3,Ta=1e3,Ea=30,Da=200,Oa=50,ka=100,Aa=20,ja=`#000000`,Ma=`#ff7b00`,Na=`#000000`;function Pa(e,t){for(;;){let n=e,r=t,i;i=z(Ur(0,8));let a=i,o;o=a===0?new B:a===1?new V:a===2?new H:a===3?new U:a===4?new W:a===5?new G:a===6?new K:new Xr;let s=o,c=ki(n),l,u;l=c[0],u=c[1];let d;d=Ei(gi(l,u,s));let f=d;if(Ai(r,n,f))return f;e=n,t=r}}function Fa(e){let t;return t=e.entity,new M(!h(t.path,i([])),t,new X(i([])))}function Ia(e){let t;return t=e.entity,new M(t.last_path_updated+1e3<N(),t,new X(i([])))}function La(e){let t,n;t=e.entity,n=e.additional_inputs;let r=i([(()=>{let e=t.position;return Pa(e,n.dungeon)})()]);return new M(!0,new Z(t.position,t.rotation,t.velocity,t.rotational_velocity,t.current_health,t.max_health,r,N(),t.spotted_player,t.last_bullet_fired,t.btree),new X(i([])))}function Ra(t){let n,r,a;return n=t.entity,r=t.additional_inputs.dungeon,a=t.additional_inputs.player,e(R(n.position,a.position)>D(globalThis.Math.trunc(100/2)),new M(!1,n,new X(i([]))),()=>new M(Ai(r,n.position,a.position),n,new X(i([]))))}function za(e){let t;return t=e.entity,new M(!0,new Z(t.position,t.rotation,t.velocity,t.rotational_velocity,t.current_health,t.max_health,t.path,t.last_path_updated,!0,t.last_bullet_fired,t.btree),new X(i([])))}function Ba(e){let t;return t=e.entity,new M(t.spotted_player,t,new X(i([])))}function Va(e){let t,n,r;t=e.entity,n=e.additional_inputs.dungeon,r=e.additional_inputs.player;let a=Pi(n,t.position,r.position),o;o=gt(a,ot(a)-1);let s=o;return new M(!0,new Z(t.position,t.rotation,t.velocity,t.rotational_velocity,t.current_health,t.max_health,s,N(),t.spotted_player,t.last_bullet_fired,t.btree),new X(i([])))}function Ha(e){let t;return t=e.entity,new M(t.position.z>0,t,new X(i([])))}function Ua(e){let t,n;t=e.entity,n=e.additional_inputs.dungeon;let r,a=t.position;r=F(a,t.velocity);let o=r,s;return s=Ai(n,t.position,o)?o:new P(t.position.x,t.position.y,t.position.z+t.velocity.z),new M(!0,new Z(s,t.rotation,t.velocity,t.rotational_velocity,t.current_health,t.max_health,t.path,t.last_path_updated,t.spotted_player,t.last_bullet_fired,t.btree),new X(i([])))}function Wa(e){let t,n;t=e.entity,n=e.additional_inputs.player;let r=nr(n.position),a=nr(t.position),o=I(r,a);return new M(R(F(L(o,g(Xn(ar(t.rotation),o),$n(o))),a),r)<10/2,t,new X(i([])))}function Ga(e,t){return new Z(e.position,e.rotation,e.velocity,e.rotational_velocity,e.current_health-t,e.max_health,e.path,e.last_path_updated,e.spotted_player,e.last_bullet_fired,e.btree)}function Ka(e){return e.current_health<=0}function qa(e,t,n,r){let i=I(t,e),a=g(-1*i.x*(e.x-n.x)-i.y*(e.y-n.y)-i.z*(e.z-n.z),Xn(i,i));if(a>1||a<0){let t=R(F(e,L(i,0)),n),a=R(F(e,L(i,1)),n);return t<r||a<r}else return R(F(e,L(i,a)),n)<r}function Ja(e){for(;;){let t=e,n=Jn(),r;r=t<-1*n?Ja(t+n*2):t;let i=r;if(i>n)e=i-n*2;else return i}}function Ya(){return Jn()/30}function Xa(){return Jn()/15}function Za(){return Jn()/20}function Qa(){return Jn()/40}function $a(e,t,n){return R(e.position,t)<n/2+10/2}function eo(e){let t;t=e.entity;let n=N();return t.last_bullet_fired+_a>n?new M(!1,t,new X(i([]))):new M(!0,new Z(t.position,t.rotation,t.velocity,t.rotational_velocity,t.current_health,t.max_health,t.path,t.last_path_updated,t.spotted_player,n,t.btree),new X(i([hr(t.position,ar(t.rotation),!1)])))}function to(e){let t;return t=e.position.z<0?new P(e.position.x,e.position.y,0):e.position,new Z(t,e.rotation,new P(e.velocity.x,e.velocity.y,e.velocity.z-va),e.rotational_velocity,e.current_health,e.max_health,e.path,e.last_path_updated,e.spotted_player,e.last_bullet_fired,e.btree)}function no(e){let t,n=e.velocity;t=L(er(n),ya);let r=t,a=Jn()/4;return i([(()=>F(ir(r,a),e.position))(),(()=>F(ir(r,a*-1),e.position))()])}function ro(t,n){let r=I(n,t.position),i;i=$n(r);let a=i,o,s;s=a<ba?r:t.velocity,o=rr(s);let c=Ja(o-t.rotation),l=zt(c);return e(l<Ya(),t,()=>{let e=g((()=>l>Xa()?Za():g(Za()*l,Xa()))()*c,l)-t.rotational_velocity,n=zt(e),r;r=n>Qa()?g(e*Qa(),n):e;let i=r,a=t.rotational_velocity+i;return new Z(t.position,t.rotation+a,t.velocity,a,t.current_health,t.max_health,t.path,t.last_path_updated,t.spotted_player,t.last_bullet_fired,t.btree)})}function io(e,t,n,r,i){let a=I(e.position,t),o=Qn(a);if(o<i*i){let e=Lt(g(r,o),Ca);return F(L(er(a),e),n)}else return n}function ao(e,t){return F(e,L(t,g(wa,va)))}function oo(t,n,r,i,a,o){let s=I(n,t.position),c;c=$n(s);let l=c;return e(l<ba,[t,t.position],()=>{let n;n=l>xa?Sa:g(Sa*l,xa);let c=n,u;u=L(er(s),c);let d=E(i,[I(u,t.velocity),!1],(e,n)=>{let r=e[1];if($n(I(t.position,n.position))<Ea&&!r){let r=ao(t.position,t.velocity);return qa(t.position,r,n.position,n.size/2)&&R(r,n.position)>n.size/2?[new P(0,0,-1*t.velocity.z+wa),!0]:[io(t,n.position,e[0],Ta,Ea),!1]}else return e}),f,p;f=d[0],p=d[1];let m=e(p,f,()=>tr((e=>E(o,e,(e,t)=>{let n;return n=t instanceof B?new P(-1*Q,0,0):t instanceof V?new P(Q,0,0):t instanceof H?new P(0,-1*Q,0):t instanceof U?new P(0,Q,0):t instanceof W?new P(-1*Q,-1*Q,0):t instanceof G?new P(Q,-1*Q,0):t instanceof K?new P(-1*Q,Q,0):new P(Q,Q,0),F(n,e)}))(tr((e=>E(a,e,(e,n)=>h(n.position,t.position)?e:io(t,n.position,e,ka,Aa)))((e=>E(r,e,(e,n)=>io(t,n.position,e,Da,Oa)))(f)),Ca)),Ca)),ee=F(t.velocity,m);return[new Z(t.position,t.rotation,ee,t.rotational_velocity,t.current_health,t.max_health,t.path,t.last_path_updated,t.spotted_player,t.last_bullet_fired,t.btree),F(ee,t.position)]})}function so(e){let t,n;t=e.entity,n=e.additional_inputs;let r,a;r=n.enemies,a=n.dungeon;let s=t.path;if(s instanceof o)return new M(!1,t,new X(i([])));{let e=s.head,n=s.tail;if(R(e,t.position)<D(100)/10)return new M(!0,new Z(t.position,t.rotation,t.velocity,t.rotational_velocity,t.current_health,t.max_health,n,t.last_path_updated,t.spotted_player,t.last_bullet_fired,t.btree),new X(i([])));{let n;n=ft(no(t),e=>ji(a,t.position,e));let o=n,s=oo(t,e,a.obstacles,a.pits,r,o),c,l;c=s[0],l=s[1];let u;u=Ai(a,c.position,l)?l:new P(c.position.x,c.position.y,c.position.z+c.velocity.z);let d=u,f;return f=ro(new Z(d,c.rotation,c.velocity,c.rotational_velocity,c.current_health,c.max_health,c.path,c.last_path_updated,c.spotted_player,c.last_bullet_fired,c.btree),e),new M(!0,f,new X(i([])))}}}function co(e){let t,n,r,a;t=e.entity,n=e.additional_inputs.enemies,r=e.additional_inputs.dungeon,a=e.additional_inputs.player;let o=nr(a.position),s;s=ft(no(t),e=>ji(r,t.position,e));let c=s,l=oo(t,o,r.obstacles,r.pits,n,c),u,d;u=l[0],d=l[1];let f;f=Ai(r,u.position,d)?d:new P(u.position.x,u.position.y,u.position.z+u.velocity.z);let p=f,m;return m=ro(new Z(p,u.rotation,u.velocity,u.rotational_velocity,u.current_health,u.max_health,u.path,u.last_path_updated,u.spotted_player,u.last_bullet_fired,u.btree),o),new M(!0,m,new X(i([])))}function lo(e){let t=new X(i([])),n=(e,t)=>e,r=(e,t)=>new X(vt(e.bullets,t.bullets)),a=e=>bn(e,t,n,r),o=e=>yn(e,t,n,r);return new Z(e,0,new P(0,0,0),0,ga,ga,i([]),0,!1,0,xn(i([a(i([Ra,za])),o(i([a(i([Ba,Va])),a(i([o(i([vn(Fa),Ia])),La]))])),o(i([a(i([Ha,Ua])),a(i([Fa,so])),a(i([Ba,co]))])),a(i([Ra,Wa,eo]))]),t,n,r))}function uo(e,t){Ka(t)?j(e,ja):j(e,Ma);let n=Bt(10,1+t.position.z/4),r;if(n instanceof p)r=n[0];else throw _(`let_assert`,ma,`enemy`,811,`draw`,`Pattern match failed, no pattern matched the value.`,{value:n,start:23633,end:23722,pattern_start:23644,pattern_end:23660});let i=Rt(r,10/2);return A(dn(pn(e,Na),t.position.x,t.position.y,i),t.position.x,t.position.y,t.position.x+Kn(t.rotation)*i/2,t.position.y+qn(t.rotation)*i/2)}var fo=`src/bullet_heck_gleam.gleam`,po=class extends t{},$=class extends t{constructor(e,t,n,r,i){super(),this.dungeon=e,this.player=t,this.bullets=n,this.enemies=r,this.score=i}},mo=class extends t{constructor(e,t){super(),this.fell_in_pit=e,this.score=t}};function ho(e){let t=gn(e,`./fonts/Minecraftia-Regular.ttf`),n=gn(e,`./fonts/WorkSans-Medium.ttf`);return Xt(Xt(Yt(),`minecraftia`,t),`worksans`,n)}function go(e){let t=wi();return an(e,t,t),new po}function _o(e,t,n){let r=t=>wi()/2-cn(e,t)/2,i=Zt(n,`minecraftia`),a;if(i instanceof p)a=i[0];else throw _(`let_assert`,fo,`bullet_heck_gleam`,56,`draw`,`Pattern match failed, no pattern matched the value.`,{value:i,start:1385,end:1456,pattern_start:1396,pattern_end:1411});let o=Zt(n,`worksans`),s;if(o instanceof p)s=o[0];else throw _(`let_assert`,fo,`bullet_heck_gleam`,57,`draw`,`Pattern match failed, no pattern matched the value.`,{value:o,start:1459,end:1524,pattern_start:1470,pattern_end:1482});let c=wi();if(ln(e,`#000000`),t instanceof po){let t=`BULLET HECK`,n=`Press 'SPACE' to start`,i=`Controls`,o=`Use arrow keys or WASD to move`,l=`Press SPACE to jump`,u=`Use mouse to aim, click to shoot`;return k(k(k(sn(k(j(k(sn(on(k(on(j(sn(fn(j(e,`#0f0f0f`),0,0,c,c),40),`#ffffff`),a),t,r(t),c/2+5),s),18),n,r(n),c/2+20),`#969696`),i,r(i),c/2+200),14),o,r(o),c/2+225),l,r(l),c/2+245),u,r(u),c/2+265)}else if(t instanceof $){let n=t.dungeon,r=t.player,i=t.bullets,a=t.enemies,o=t.score;Oi(e,n),St(a,t=>uo(e,t)),St(i,t=>gr(e,t)),pa(e,r);let s=c-100;return k(k(k(sn(j(fn(j(fn(j(mn(e),`#660000`),0,0,c,36),`#28e200`),37,12,D(r.current_health),10),`#ffffff`),14),`HP:`,10,22),`Score:`,s,22),Tt(o),s+45,22)}else{let n=t.fell_in_pit,i=t.score,o=wi(),c=`GAME OVER`,l=`Press 'R' to play again`,u=`Final Score: `+Tt(i),d;d=n?`You fell to your death.`:`Turns out, red things hurt.`;let f=d;return k(sn(k(j(k(on(sn(k(on(sn(j(fn(j(e,`#0f0f0f`),0,0,o,o),`#e20000`),30),a),c,r(c),o/2-25),22),s),f,r(f),o/2-15),`#ffffff`),u,r(u),o/2+45),18),l,r(l),o/2+70)}}function vo(e){return mt(xt(0,3),t=>lo(Ri(e.rooms,e.pits)))}function yo(e,t,n){if(e===`r`)return new po;if(e===` `)if(n instanceof po){let e=wi(),t=Vi();return new $(t,da(new P(e/2,e/2,0)),i([]),vo(t),0)}else if(n instanceof $){let e=n.dungeon,t=n.player,r=n.bullets,i=n.enemies,a=n.score;return new $(e,ca(t),r,i,a)}else return n;else if(e===`w`&&n instanceof $){let e=n.dungeon,t=n.player,r=n.bullets,i=n.enemies,a=n.score;return new $(e,na(t,!1),r,i,a)}else if(e===`s`&&n instanceof $){let e=n.dungeon,t=n.player,r=n.bullets,i=n.enemies,a=n.score;return new $(e,na(t,!0),r,i,a)}else if(e===`a`&&n instanceof $){let e=n.dungeon,t=n.player,r=n.bullets,i=n.enemies,a=n.score;return new $(e,ta(t,!1),r,i,a)}else if(e===`d`&&n instanceof $){let e=n.dungeon,t=n.player,r=n.bullets,i=n.enemies,a=n.score;return new $(e,ta(t,!0),r,i,a)}else return n}function bo(e,t,n){if(n instanceof $)if(e===`w`){let e=n.dungeon,t=n.player,r=n.bullets,i=n.enemies,a=n.score;return new $(e,ia(t),r,i,a)}else if(e===`s`){let e=n.dungeon,t=n.player,r=n.bullets,i=n.enemies,a=n.score;return new $(e,ia(t),r,i,a)}else if(e===`a`){let e=n.dungeon,t=n.player,r=n.bullets,i=n.enemies,a=n.score;return new $(e,ra(t),r,i,a)}else if(e===`d`){let e=n.dungeon,t=n.player,r=n.bullets,i=n.enemies,a=n.score;return new $(e,ra(t),r,i,a)}else return n;else return n}function xo(t,n,i){if(i instanceof $){let a=i.dungeon,o=i.player,s=i.bullets,c=i.enemies,l=i.score;return e(!la(o),i,()=>{let e=nr(I(new P(t,n,0),o.position)),i;return i=o.position,new $(a,new Y(o.position,o.velocity,o.acceleration,N(),o.last_hit_time,o.current_health,o.max_health),r(hr(new P(i.x,i.y,0),e,!0),s),c,l)})}else return i}function So(t){if(t instanceof $){let n=t.dungeon,a=t.player,s=t.bullets,c=t.enemies,l=t.score,u=a.position,d=ea(a),f;f=Ai(n,u,d.position)?d:new Y(new P(u.x,u.y,u.z+a.velocity.z),a.velocity,a.acceleration,a.last_fire_time,a.last_hit_time,a.current_health,a.max_health);let p=f;return e(p.position.z<=0&&vi(n,p.position),new mo(!0,l),()=>{let t=fa(sa(p)),a=E(n.obstacles,t,(e,t)=>Kr(t,e.position,10)&&!ua(e)?aa(e,10):e),u=E(c,[i([]),s,a,l],(t,i)=>{let a,o,s,c;a=t[0],o=t[1],s=t[2],c=t[3];let l=i.btree(new _n(i,new ha(a,n,s))),u,d;u=l.entity,d=l.additional_outputs.bullets;let f=to(u),p=vt(d,o);return e(f.position.z<=0&&vi(n,f.position),[a,p,s,c+100],()=>{let t;t=$a(f,s.position,10)&&!ua(s)?aa(s,5):s;let i=t,o=E(n.obstacles,f,(e,t)=>Kr(t,e.position,10)?Ga(e,10):e);return e(Ka(o),[a,p,i,c+100],()=>[r(o,a),p,i,c])})}),d,f,m,h;d=u[0],f=u[1],m=u[2],h=u[3];let ee;ee=ut(f,pr);let te=E(ee,[i([]),m,d,h],(t,a)=>e(!Ai(n,a.position,fr(a).position),t,()=>{let n,o,s,c;return n=t[0],o=t[1],s=t[2],c=t[3],e(!a.belongs_to_player&&mr(a,o.position,10)&&!ua(o),[n,aa(o,5),s,c],()=>{let t=E(s,[i([]),c,!1],(t,n)=>{let i,o,s;i=t[0],o=t[1],s=t[2];let c;c=a.belongs_to_player&&mr(a,n.position,10)?[Ga(n,10),!0]:[n,s];let l=c,u,d;return u=l[0],d=l[1],e(Ka(u),[i,o+100,d],()=>[r(u,i),o,d])}),l,u,d;return l=t[0],u=t[1],d=t[2],d?[n,o,l,u]:[r(fr(a),n),o,l,u]})})),ne,re,ie,ae;return ne=te[0],re=te[1],ie=te[2],ae=te[3],e(oa(re),new mo(!1,ae),()=>{if(ie instanceof o){let e=wi(),t=Vi();return new $(t,da(new P(e/2,e/2,0)),i([]),vo(t),ae)}else return new $(n,re,ne,ie,ae)})})}else return t}function Co(){return rn($t(nn(tn(en(Qt(ho,go,_o),yo),bo),xo),So))}Co();
//# sourceMappingURL=index-Bwzt8yiD.js.map